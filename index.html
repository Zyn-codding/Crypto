<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Crypto Simulation</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial"></script>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #0d1117;
      color: #fff;
    }
    #loginPage, #mainPage { display: none; }
    .container { padding: 20px; }
    .card {
      background: #161b22;
      padding: 20px;
      border-radius: 10px;
      max-width: 400px;
      margin: 100px auto;
      box-shadow: 0 0 15px rgba(0,0,0,0.5);
    }
    input, select {
      width: 100%;
      padding: 10px;
      margin: 5px 0;
      border-radius: 5px;
      border: none;
    }
    button {
      padding: 10px 15px;
      margin: 5px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
    }
    .buy { background: #16c784; color: white; }
    .sell { background: #ea3943; color: white; }
  </style>
</head>
<body>
  <!-- Login Page -->
  <div id="loginPage" class="container">
    <div class="card">
      <h2>Login</h2>
      <input type="text" id="username" placeholder="Username">
      <input type="password" id="password" placeholder="Password">
      <button onclick="login()">Login</button>
      <p id="loginError" style="color:red;"></p>
    </div>
  </div>

  <!-- Main Page -->
  <div id="mainPage" class="container">
    <h2>Crypto Simulation</h2>
    <p>Saldo: $<span id="balance">0</span></p>
    <label for="coinSelect">Select Coin:</label>
    <select id="coinSelect" onchange="changeCoin()"></select>
    <canvas id="cryptoChart" height="300"></canvas>
    <div>
      <button class="buy" onclick="buy()">BUY</button>
      <button class="sell" onclick="sell()">SELL</button>
    </div>
  </div>

<script>
  const users = {
    "ACC_DEV": { password: "ZYN", balance: 1000 },
    "USER_123": { password: "user1", balance: 10 },
    "Anomaly1": { password: "Tung", balance: 10 }
  };

  const coins = {
    BTC: 50000,
    ETH: 3000,
    LTC: 200,
    XEM: 0.05,
    BAT: 0.25,
    BNB: 350,
    VIDY: 0.001,
    NEO: 10,
    EOS: 0.7,
    TRX: 0.1
  };

  let currentUser = null;
  let balance = 0;
  let chart, chartData = [];
  let currentCoin = "BTC";
  let position = null; // {coin, price}
  let timer;

  window.onload = () => {
    if (!localStorage.getItem("loggedUser")) {
      document.getElementById("loginPage").style.display = "block";
    } else {
      currentUser = localStorage.getItem("loggedUser");
      balance = parseFloat(localStorage.getItem(currentUser+"_balance")) || users[currentUser].balance;
      initMain();
    }
  };

  function login() {
    let u = document.getElementById("username").value;
    let p = document.getElementById("password").value;
    if (users[u] && users[u].password === p) {
      currentUser = u;
      balance = parseFloat(localStorage.getItem(u+"_balance")) || users[u].balance;
      localStorage.setItem("loggedUser", u);
      initMain();
    } else {
      document.getElementById("loginError").innerText = "Invalid credentials!";
    }
  }

  function initMain() {
    document.getElementById("loginPage").style.display = "none";
    document.getElementById("mainPage").style.display = "block";
    document.getElementById("balance").innerText = balance.toFixed(2);
    let sel = document.getElementById("coinSelect");
    sel.innerHTML = "";
    for (let c in coins) {
      let opt = document.createElement("option");
      opt.value = c;
      opt.text = c;
      sel.appendChild(opt);
    }
    changeCoin();
  }

  function changeCoin() {
    currentCoin = document.getElementById("coinSelect").value;
    chartData = generateInitialData(coins[currentCoin]);
    if (chart) chart.destroy();
    clearInterval(timer);
    let ctx = document.getElementById("cryptoChart").getContext("2d");
    chart = new Chart(ctx, {
      type: 'candlestick',
      data: { datasets: [{ label: currentCoin, data: chartData }] },
      options: {
        plugins: { legend: { labels: { color: '#fff' } } },
        scales: {
          x: { ticks: { color: '#fff' } },
          y: { ticks: { color: '#fff' } }
        }
      }
    });
    timer = setInterval(() => updateChart(), 2000);
  }

  function generateInitialData(price) {
    let data = [];
    for (let i=0; i<30; i++) {
      let open = price;
      let close = open + (Math.random()-0.5)*open*0.02;
      let high = Math.max(open, close) + Math.random()*open*0.01;
      let low = Math.min(open, close) - Math.random()*open*0.01;
      data.push({x: i, o: open, h: high, l: low, c: close});
      price = close;
    }
    return data;
  }

  function updateChart() {
    let last = chartData[chartData.length-1];
    let idx = chartData.length;
    let open = last.c;
    let close = open + (Math.random()-0.5)*open*0.02;
    let high = Math.max(open, close) + Math.random()*open*0.01;
    let low = Math.min(open, close) - Math.random()*open*0.01;
    chartData.push({x: idx, o: open, h: high, l: low, c: close});
    if (chartData.length > 50) chartData.shift();
    chart.update();

    // Update floating PnL if holding position
    if (position && position.coin === currentCoin) {
      let profit = (close - position.price);
      if (["BTC","ETH","LTC","BNB","NEO"].includes(currentCoin)) profit *= 0.1;
      document.getElementById("balance").innerText = (balance+profit).toFixed(2);
    }
  }

  function buy() {
    if (position) { alert("You already have a position! Sell first."); return; }
    let last = chartData[chartData.length-1];
    position = {coin: currentCoin, price: last.c};
    alert("Bought " + currentCoin + " at $" + last.c.toFixed(2));
  }

  function sell() {
    if (!position) { alert("No active position!"); return; }
    let last = chartData[chartData.length-1];
    let profit = (last.c - position.price);
    if (["BTC","ETH","LTC","BNB","NEO"].includes(currentCoin)) profit *= 0.1;
    balance += profit;
    localStorage.setItem(currentUser+"_balance", balance);
    document.getElementById("balance").innerText = balance.toFixed(2);
    alert("Sold " + currentCoin + " at $" + last.c.toFixed(2) + " | P/L: $" + profit.toFixed(2));
    position = null;
  }
</script>
</body>
</html>      cursor: pointer;
      font-weight: bold;
    }
    .buy { background: #16c784; color: white; }
    .sell { background: #ea3943; color: white; }
    select {
      padding: 5px;
      border-radius: 5px;
      margin-left: 10px;
    }
  </style>
</head>
<body>
  <!-- Login Page -->
  <div id="loginPage" class="container">
    <div class="card">
      <h2>Login</h2>
      <input type="text" id="username" placeholder="Username">
      <input type="password" id="password" placeholder="Password">
      <button onclick="login()">Login</button>
      <p id="loginError" style="color:red;"></p>
    </div>
  </div>

  <!-- Main Page -->
  <div id="mainPage" class="container">
    <h2>Crypto Simulation</h2>
    <p>Saldo: $<span id="balance">0</span></p>
    <label for="coinSelect">Select Coin:</label>
    <select id="coinSelect" onchange="changeCoin()"></select>
    <canvas id="cryptoChart" height="300"></canvas>
    <div>
      <button class="buy" onclick="buy()">BUY</button>
      <button class="sell" onclick="sell()">SELL</button>
    </div>
  </div>

<script>
  const users = {
    "ACC_DEV": { password: "ZYN", balance: 1000 },
    "USER_123": { password: "user1", balance: 10 },
    "Anomaly1": { password: "Tung", balance: 10 }
  };

  const coins = {
    BTC: 50000,
    ETH: 3000,
    LTC: 200,
    XEM: 0.05,
    BAT: 0.25,
    BNB: 350,
    VIDY: 0.001,
    NEO: 10,
    EOS: 0.7,
    TRX: 0.1
  };

  let currentUser = null;
  let balance = 0;
  let chart, chartData = [];
  let currentCoin = "BTC";
  let position = null; // {coin, price}

  window.onload = () => {
    if (!localStorage.getItem("loggedUser")) {
      document.getElementById("loginPage").style.display = "block";
    } else {
      currentUser = localStorage.getItem("loggedUser");
      balance = parseFloat(localStorage.getItem(currentUser+"_balance")) || users[currentUser].balance;
      initMain();
    }
  };

  function login() {
    let u = document.getElementById("username").value;
    let p = document.getElementById("password").value;
    if (users[u] && users[u].password === p) {
      currentUser = u;
      balance = parseFloat(localStorage.getItem(u+"_balance")) || users[u].balance;
      localStorage.setItem("loggedUser", u);
      initMain();
    } else {
      document.getElementById("loginError").innerText = "Invalid credentials!";
    }
  }

  function initMain() {
    document.getElementById("loginPage").style.display = "none";
    document.getElementById("mainPage").style.display = "block";
    document.getElementById("balance").innerText = balance.toFixed(2);
    let sel = document.getElementById("coinSelect");
    sel.innerHTML = "";
    for (let c in coins) {
      let opt = document.createElement("option");
      opt.value = c;
      opt.text = c;
      sel.appendChild(opt);
    }
    changeCoin();
  }

  function changeCoin() {
    currentCoin = document.getElementById("coinSelect").value;
    chartData = generateInitialData(coins[currentCoin]);
    if (chart) chart.destroy();
    let ctx = document.getElementById("cryptoChart").getContext("2d");
    chart = new Chart(ctx, {
      type: 'candlestick',
      data: { datasets: [{ label: currentCoin, data: chartData }] },
      options: {
        plugins: { legend: { labels: { color: '#fff' } } },
        scales: {
          x: { ticks: { color: '#fff' } },
          y: { ticks: { color: '#fff' } }
        }
      }
    });
    setInterval(() => updateChart(), 2000);
  }

  function generateInitialData(price) {
    let data = [];
    for (let i=0; i<20; i++) {
      let open = price + (Math.random()-0.5)*price*0.02;
      let close = open + (Math.random()-0.5)*price*0.02;
      let high = Math.max(open, close) + Math.random()*price*0.01;
      let low = Math.min(open, close) - Math.random()*price*0.01;
      data.push({x: i, o: open, h: high, l: low, c: close});
      price = close;
    }
    return data;
  }

  function updateChart() {
    let last = chartData[chartData.length-1];
    let idx = chartData.length;
    let open = last.c;
    let close = open + (Math.random()-0.5)*open*0.02;
    let high = Math.max(open, close) + Math.random()*open*0.01;
    let low = Math.min(open, close) - Math.random()*open*0.01;
    chartData.push({x: idx, o: open, h: high, l: low, c: close});
    if (chartData.length > 50) chartData.shift();
    chart.update();

    // Update position profit/loss
    if (position && position.coin === currentCoin) {
      let profit = (close - position.price);
      if (currentCoin === "BTC" || currentCoin === "ETH" || currentCoin === "LTC" || currentCoin === "BNB" || currentCoin === "NEO") {
        profit *= 0.1; // adjust scale
      }
      document.getElementById("balance").innerText = (balance+profit).toFixed(2);
    }
  }

  function buy() {
    if (position) { alert("You already have a position! Sell first."); return; }
    let last = chartData[chartData.length-1];
    position = {coin: currentCoin, price: last.c};
    alert("Bought " + currentCoin + " at $" + last.c.toFixed(2));
  }

  function sell() {
    if (!position) { alert("No active position!"); return; }
    let last = chartData[chartData.length-1];
    let profit = (last.c - position.price);
    if (currentCoin === "BTC" || currentCoin === "ETH" || currentCoin === "LTC" || currentCoin === "BNB" || currentCoin === "NEO") {
      profit *= 0.1; // adjust scale
    }
    balance += profit;
    localStorage.setItem(currentUser+"_balance", balance);
    document.getElementById("balance").innerText = balance.toFixed(2);
    alert("Sold " + currentCoin + " at $" + last.c.toFixed(2) + " | P/L: $" + profit.toFixed(2));
    position = null;
  }
</script>
</body>
</html>    <h3>Crypto Price: $<span id="cryptoPrice">100</span></h3>
    <button onclick="buyCrypto()">Buy</button>
    <button onclick="sellCrypto()">Sell</button>
    <p id="cryptoStatus"></p>
  </div>

  <!-- Shop -->
  <div id="shop">
    <h3>Shop</h3>
    <button onclick="buyLucky('v1',10,30,5)">Lucky v1 ($10)</button>
    <button onclick="buyLucky('v2',20,50,15)">Lucky v2 ($20)</button>
    <button onclick="buyLucky('v3',35,75,30)">Lucky v3 ($35)</button>
    <button onclick="buyLucky('v4',50,90,50)">Lucky v4 ($50)</button>
    <button onclick="buyLucky('inf',550,100,0)">Lucky Inf ($550)</button>
    <p id="luckStatus">Luck: 0%</p>
  </div>
</div>

<script>
  const users = {
    "ACC_DEV": { password: "ZYN", balance: 1000 },
    "USER_123": { password: "user1", balance: 10 },
    "Anomaly1": { password: "Tung", balance: 10 }
  };

  let currentUser = null;
  let cryptoPrice = 100;
  let holdingCrypto = false;
  let luck = { percent: 0, expire: 0 }; // expire = timestamp

  function saveData() {
    if (!currentUser) return;
    localStorage.setItem(currentUser, JSON.stringify({
      balance: users[currentUser].balance,
      luck: luck,
      cryptoPrice: cryptoPrice,
      holdingCrypto: holdingCrypto
    }));
  }

  function loadData(username) {
    let data = localStorage.getItem(username);
    if (data) {
      let obj = JSON.parse(data);
      users[username].balance = obj.balance;
      luck = obj.luck;
      cryptoPrice = obj.cryptoPrice || 100;
      holdingCrypto = obj.holdingCrypto || false;
    }
  }

  function login() {
    const u = document.getElementById("username").value;
    const p = document.getElementById("password").value;
    if (users[u] && users[u].password === p) {
      currentUser = u;
      loadData(u);
      document.getElementById("login").classList.add("hidden");
      document.getElementById("game").classList.remove("hidden");
      document.getElementById("userDisplay").innerText = u;
      updateDisplay();
    } else {
      document.getElementById("loginMessage").innerText = "Invalid login";
    }
  }

  function updateDisplay() {
    document.getElementById("balance").innerText = users[currentUser].balance;
    document.getElementById("cryptoPrice").innerText = cryptoPrice;
    document.getElementById("luckStatus").innerText = `Luck: ${luck.percent}%`;
    saveData();
  }

  // Spin logic
  const prizes = [1,10,15,20,25,30,35,40,45,50,100];
  function spin() {
    let prize = prizes[Math.floor(Math.random()*prizes.length)];
    if (luck.percent > 0 && Math.random()*100 < luck.percent) {
      prize *= 2; // hoki dobel hadiah
    }
    users[currentUser].balance += prize;
    alert("You won $" + prize);
    updateDisplay();
  }

  // Crypto
  function buyCrypto() {
    if (!holdingCrypto) {
      holdingCrypto = true;
      document.getElementById("cryptoStatus").innerText = "You bought at $" + cryptoPrice;
    }
    updateDisplay();
  }

  function sellCrypto() {
    if (holdingCrypto) {
      let gain = cryptoPrice - 100;
      users[currentUser].balance += gain > 0 ? gain : 0;
      holdingCrypto = false;
      document.getElementById("cryptoStatus").innerText = "You sold for $" + cryptoPrice + " | Profit: $" + gain;
    }
    updateDisplay();
  }

  setInterval(()=>{
    // update crypto price
    let change = (Math.random() < (luck.percent/100)) ? 1 : (Math.random()<0.5?-1:1);
    cryptoPrice += change * Math.floor(Math.random()*5);
    if (cryptoPrice < 1) cryptoPrice = 1;

    // check luck expire
    if (luck.expire > 0 && Date.now() > luck.expire) {
      luck.percent = 0;
      luck.expire = 0;
    }
    updateDisplay();
  },2000);

  // Shop
  function buyLucky(type, cost, percent, minutes) {
    if (users[currentUser].balance >= cost) {
      users[currentUser].balance -= cost;
      luck.percent = percent;
      luck.expire = (minutes>0) ? Date.now() + minutes*60000 : 0;
      alert("You bought Lucky " + type + " ("+percent+"%)");
      updateDisplay();
    } else {
      alert("Not enough money!");
    }
  }
</script>
</body>
</html>
